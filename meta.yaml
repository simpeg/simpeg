{% set name = "mira-simpeg" %}
{% set version = "0.21.2.1b3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  path: ../simpeg

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps
  number: 0

requirements:
  host:
    - python >=3.10.0,<3.12.0
    - poetry-core >=1.0.0
    - setuptools >=64
    - setuptools_scm >=8
    - pip
  run:
    - python >=3.10
    - discretize >=0.10.0
    - empymod >=2.0.0
    - geoana >=0.5.0
    - geoh5py >=0.10.0b1, <0.11.0a.dev
    - matplotlib-base
    - numpy >=1.20
    - pandas
    - pymatsolver >=0.2.0, <0.3.0
    - scikit-learn >=1.2
    - scipy >=1.8.0
  run_constrained:
    - dask-core *
    - distributed *
    - fsspec >=0.3.3
    - zarr *

test:
  imports:
    - simpeg
    - simpeg.electromagnetics
    - simpeg.electromagnetics.analytics
    - simpeg.electromagnetics.frequency_domain
    - simpeg.electromagnetics.natural_source
    - simpeg.electromagnetics.natural_source.utils
    - simpeg.electromagnetics.static
    - simpeg.electromagnetics.static.resistivity
    - simpeg.electromagnetics.static.induced_polarization
    - simpeg.electromagnetics.static.spectral_induced_polarization
    - simpeg.electromagnetics.static.utils
    - simpeg.electromagnetics.time_domain
    - simpeg.electromagnetics.utils
    - simpeg.electromagnetics.viscous_remanent_magnetization
    - simpeg.flow
    - simpeg.flow.richards
    - simpeg.potential_fields
    - simpeg.potential_fields.gravity
    - simpeg.potential_fields.magnetics
    - simpeg.seismic
    - simpeg.seismic.straight_ray_tomography
    - simpeg.utils
    - simpeg.utils.drivers
    - simpeg.regularization
    - simpeg.meta
  commands:
    - pip check
  requires:
    - pip

about:
  home: https://docs.simpeg.xyz/
  summary: 'Mira Geoscience fork of SimPEG: Simulation and Parameter Estimation in Geophysics'
  description: |
    Simulation and Parameter Estimation in Geophysics - A python package for simulation and 
    gradient based parameter estimation in the context of geophysical applications.
  
    Warning:
    This is a fork created by Mira Geoscience.
  license: MIT
  license_file: 
    - LICENSE
  doc_url: https://docs.simpeg.xyz/
  dev_url: https://github.com/MiraGeoscience/simpeg

extra:
  recipe-maintainers:
    - SophieCurinier
    - sebhmg